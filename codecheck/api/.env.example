# ============================================================================
# CodeCheck API Environment Configuration Template
# ============================================================================
# This is a template file. Copy this to .env and fill in your actual values.
# NEVER commit .env files with real credentials to version control!
# ============================================================================

# ----------------------------------------------------------------------------
# Security Configuration
# ----------------------------------------------------------------------------

# JWT Secret Key - CRITICAL: Change this in production!
# Generate a secure random string using one of these methods:
#   - Python: python -c "import secrets; print(secrets.token_urlsafe(32))"
#   - OpenSSL: openssl rand -hex 32
#   - Online: https://randomkeygen.com/ (use "Fort Knox Password")
# Minimum recommended length: 32 characters
JWT_SECRET_KEY=CHANGE-THIS-IN-PRODUCTION-USE-LONG-RANDOM-STRING

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------

# Full database connection URL (alternative to individual params)
# Format: postgresql://username:password@hostname:port/database_name
# Example: postgresql://postgres:mypassword@localhost:5432/codecheck
DATABASE_URL=postgresql://postgres:password@localhost:5432/codecheck

# Individual database connection parameters
# Use these when not using DATABASE_URL
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=password
DB_NAME=codecheck

# Database connection pool settings (optional)
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30

# ----------------------------------------------------------------------------
# Anthropic Claude API Configuration
# ----------------------------------------------------------------------------

# Claude API Key - Required for AI-powered features
# Get your API key from: https://console.anthropic.com/
# IMPORTANT: Keep this secret and never commit to version control!
CLAUDE_API_KEY=sk-ant-your-api-key-here

# Claude model configuration (optional)
CLAUDE_MODEL=claude-3-5-sonnet-20241022
CLAUDE_MAX_TOKENS=4096
CLAUDE_TEMPERATURE=0.7

# ----------------------------------------------------------------------------
# CORS Configuration
# ----------------------------------------------------------------------------

# Comma-separated list of allowed origins for Cross-Origin Resource Sharing
# Examples:
#   Development: http://localhost:3000,http://localhost:5173
#   Production: https://yourdomain.com,https://app.yourdomain.com
# IMPORTANT: Change "*" in production to specific domains!
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080

# ----------------------------------------------------------------------------
# Redis Configuration (Optional - for caching and rate limiting)
# ----------------------------------------------------------------------------

# Redis connection URL
# Format: redis://[:password]@hostname:port/database_number
# Example: redis://localhost:6379/0
# For Redis with password: redis://:mypassword@localhost:6379/0
REDIS_URL=redis://localhost:6379/0

# Redis settings (optional)
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=10
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ----------------------------------------------------------------------------
# Application Environment
# ----------------------------------------------------------------------------

# Environment: development, staging, or production
# This affects logging, error handling, and security settings
ENVIRONMENT=development

# Application settings
APP_NAME=CodeCheck API
APP_VERSION=1.0.0
DEBUG=true

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4

# ----------------------------------------------------------------------------
# Logging Configuration
# ----------------------------------------------------------------------------

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json or text
LOG_FORMAT=text

# Log file path (optional - leave empty to log to stdout only)
LOG_FILE_PATH=

# ----------------------------------------------------------------------------
# Rate Limiting (Optional)
# ----------------------------------------------------------------------------

# Enable rate limiting
RATE_LIMIT_ENABLED=true

# Default rate limit: requests per minute
RATE_LIMIT_PER_MINUTE=60

# Rate limit for AI endpoints (lower for expensive operations)
AI_RATE_LIMIT_PER_MINUTE=10

# ----------------------------------------------------------------------------
# Session Configuration
# ----------------------------------------------------------------------------

# Session secret for secure session management
# Generate similar to JWT_SECRET_KEY
SESSION_SECRET=CHANGE-THIS-IN-PRODUCTION-USE-LONG-RANDOM-STRING

# Session timeout in minutes
SESSION_TIMEOUT_MINUTES=60

# ----------------------------------------------------------------------------
# Email Configuration (Optional - for notifications)
# ----------------------------------------------------------------------------

# SMTP server settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@example.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_EMAIL=noreply@codecheck.example.com
SMTP_USE_TLS=true

# ----------------------------------------------------------------------------
# AWS Configuration (Optional - for document storage)
# ----------------------------------------------------------------------------

# AWS credentials for S3 storage
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=codecheck-documents

# ----------------------------------------------------------------------------
# Sentry Configuration (Optional - for error tracking)
# ----------------------------------------------------------------------------

# Sentry DSN for error tracking and monitoring
# Get from: https://sentry.io/
SENTRY_DSN=

# Sentry environment
SENTRY_ENVIRONMENT=development

# ----------------------------------------------------------------------------
# Feature Flags (Optional)
# ----------------------------------------------------------------------------

# Enable/disable specific features
FEATURE_AUTH_ENABLED=true
FEATURE_AI_EXPLANATIONS=true
FEATURE_DOCUMENT_UPLOAD=false
FEATURE_REAL_TIME_UPDATES=false

# ----------------------------------------------------------------------------
# Security Headers (Production)
# ----------------------------------------------------------------------------

# Enable strict security headers in production
ENABLE_SECURITY_HEADERS=false

# Content Security Policy (CSP)
CSP_POLICY=default-src 'self'

# ----------------------------------------------------------------------------
# Monitoring and Health Checks
# ----------------------------------------------------------------------------

# Health check endpoints
ENABLE_HEALTH_CHECK=true
HEALTH_CHECK_PATH=/health

# Metrics endpoint for Prometheus
ENABLE_METRICS=false
METRICS_PATH=/metrics

# ----------------------------------------------------------------------------
# PRODUCTION DEPLOYMENT CHECKLIST
# ----------------------------------------------------------------------------
# Before deploying to production, ensure you:
#
# 1. ✅ Generate a strong, unique JWT_SECRET_KEY (min 32 chars)
# 2. ✅ Generate a strong, unique SESSION_SECRET (min 32 chars)
# 3. ✅ Set a strong DB_PASSWORD (min 16 chars, mixed case, numbers, symbols)
# 4. ✅ Configure ALLOWED_ORIGINS to your specific domains (remove *)
# 5. ✅ Set ENVIRONMENT=production
# 6. ✅ Set DEBUG=false
# 7. ✅ Add your actual CLAUDE_API_KEY
# 8. ✅ Configure Redis with a password if using REDIS_URL
# 9. ✅ Enable ENABLE_SECURITY_HEADERS=true
# 10. ✅ Set appropriate LOG_LEVEL (INFO or WARNING)
# 11. ✅ Configure Sentry or other monitoring (optional but recommended)
# 12. ✅ Never commit the .env file to version control
# 13. ✅ Rotate secrets regularly (every 90 days minimum)
# 14. ✅ Use environment-specific .env files (.env.production, .env.staging)
# 15. ✅ Enable RATE_LIMIT_ENABLED=true to prevent abuse
# ============================================================================
